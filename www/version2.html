<!DOCTYPE html>
<html>
	<head>
		<title>Google Maps</title>
		<meta content="author" value="4X_Pro" />
		<meta charset="utf-8" />
		<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC_GTGGge8SF-TlI8A15JsVescUBu1jexw&map_ids=1234&libraries=visualization"></script>
	</head>
	<body onload="initMap()">
		<div id="map_canvas" style="width:100%; height:700px"></div>
		<script type="text/javascript">

			//------------------------------------------------------------------------------------------------
			
			function initMap() {
				var latlng = new google.maps.LatLng(55.014879, 82.948738);
    			var myOptions = {
    				zoom: 15,
    				center: latlng,
    				mapTypeId: google.maps.MapTypeId.ROADMAP
    			};
  				const map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  			//------------------------------------------------------------------------------------------------

  				map.addListener("click", (e) => {
    				placeMarkerAndPanTo(e.latLng, map, this.pictures);
  				});
  // 			//------------------------------------------------------------------------------------------------

  				this.heatMapData = [
			    	{ location: new google.maps.LatLng(55.018809, 82.954429), weight: 10 },
			    	{ location: new google.maps.LatLng(55.016644, 82.939773), weight: 10 },
			    	{ location: new google.maps.LatLng(55.021756, 82.947348), weight: 10 },
			    	{ location: new google.maps.LatLng(55.013205, 82.962531), weight: 10 },
			    	{ location: new google.maps.LatLng(55.022866, 82.934277), weight: 10 },
			    	{ location: new google.maps.LatLng(55.010354, 82.938554), weight: 10 }
			    ];
			    //Сохдание объекта, для отображаения всех точек на карте
			    this.heatmap = new google.maps.visualization.HeatmapLayer({
			    	data: this.heatMapData,
			    	radius: 100,
			    	opacity: 0.4
			    });
			    this.heatmap.setMap(map);
		// 	//-----------------------------------------------------------------------------------------------

     			this.station = new Array;
			    this.pictures = 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png'
			    
			    this.station[0] = new google.maps.Marker({
			    	position: new google.maps.LatLng(55.018810, 82.954429),
			    	map: map,
			    	title: "Базовая станция 1",
			    	icon: this.pictures	
			    });
			    
			    this.station[1] = new google.maps.Marker({
			    	position: new google.maps.LatLng(55.016644, 82.939773),
			    	map: map,
			    	title: "Базовая станция 2",
			    	icon: this.pictures
			    });

			    this.station[2] = new google.maps.Marker({
			    	position: new google.maps.LatLng(55.021756, 82.947348),
			    	map: map,
			    	title: "Базовая станция 3",
			    	icon: this.pictures
			    });

			    this.station[3] = new google.maps.Marker({
			    	position: new google.maps.LatLng(55.013205, 82.962531),
			    	map: map,
			    	title: "Базовая станция 4",
			    	icon: this.pictures
			    });

			    this.station[4] = new google.maps.Marker({
			    	position: new google.maps.LatLng(55.022866, 82.934277),
			    	map: map,
			    	title: "Базовая станция 5",
			    	icon: this.pictures
			    });

			    this.station[5] = new google.maps.Marker({
			    	position: new google.maps.LatLng(55.010354, 82.938554),
			    	map: map,
			    	title: "Базовая станция 6",
			    	icon: this.pictures
			    });

			    var number_station = 6;
			}
		//-----------------------------------------------------------------------------------------------

			function placeMarkerAndPanTo(latLng, map, pictures) {
				new google.maps.Marker({
    				position: latLng,
    				map: map,
    				icon: pictures,
  				});
  				mapDate = [{location: latLng, weight: 10}];
			    add_heatMap = new google.maps.visualization.HeatmapLayer({
			    	data: mapDate,
			    	radius: 200,
			    	opacity: 0.4
			    });
			    add_heatMap.setMap(map);
		 	}
		</script>
	</body>
</html>